<section class="card">
  <p-table
    #dt
    [value]="content"
    dataKey="id"
    [rows]="this.paginationConfig?.rows || 5"
    [loading]="loading"
    [lazy]="true"
    [rowsPerPageOptions]="[5, 10, 20, 30]"
    [showCurrentPageReport]="true"
    [showPageLinks]="false"
    [showFirstLastIcon]="false"
    styleClass="accio-table"
    [paginator]="true"
    [globalFilterFields]="['name', 'id', 'email']"
    responsiveLayout="scroll"
    [totalRecords]="paginationConfig?.total"
    currentPageReportTemplate="{first} - {last} de {totalRecords}"
    (onLazyLoad)="loadData($event)"
    dataKey="id"
  >
    <ng-template pTemplate="caption">
      <div class="flex justify-content-between flex-column sm:flex-row">
        <span class="p-input-icon-left mb-2">
          <i class="pi pi-search"></i>
          <input
            pInputText
            type="text"
            #filter
            (input)="onGlobalFilter(dt, $event)"
            placeholder="pesquisar"
            class="w-full"
          />
        </span>

        <p-dropdown
          [options]="filterType"
          [(ngModel)]="selectedFilter"
          optionLabel="name"
          optionValue="code"
          (onChange)="typeFilter()"
          [showClear]="true"
          [style]="{ minWidth: '220px' }"
          placeholder="Tipo de movimentação"
        />
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>
          <div class="flex justify-content-between align-items-center">Cod.</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Operação</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Ativo</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Qtd</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Valor Unit.</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Taxa</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Data</div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">Total</div>
        </th>
        <th style="min-width: 5rem">
          <div class="flex justify-content-between align-items-center"></div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td>
          {{ item.cod }}
        </td>
        <td>{{ item.type_operation.title }}</td>
        <td class="relative">{{ item.type.title }}</td>
        <td class="relative">{{ item.qtd }}</td>
        <td>
          {{ item.unity_value | currency: 'BRL' : 'symbol' : '1.3-3' }}
        </td>
        <td>{{ item.fee | currency: 'BRL' : 'symbol' : '1.3-3' }}</td>
        <td>{{ item.date_operation }}</td>
        <td>{{ item.total | currency: 'BRL' : 'symbol' : '1.3-3' }}</td>
        <td>
          <span class="flex">
            <button
              class="icon-info accio-table__action cursor-pointer"
              (click)="showObsModal = true"
              [disabled]="!item.obs"
            ></button>
            <button
              class="icon-edit accio-table__action cursor-pointer"
              (click)="openEditor(item)"
            ></button>
            <button
              class="icon-trash-2 accio-table__action cursor-pointer"
              (click)="deleteMovement($event, item.id)"
            ></button>
          </span>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">Nenhum dado encontrado</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="loadingbody">
      <tr>
        <td colspan="8">Carregando dados...</td>
      </tr>
    </ng-template>
  </p-table>
</section>

<p-confirmPopup />
